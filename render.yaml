services:
  # Backend service
  - type: web
    name: workorderpro-backend
    env: docker
    dockerContext: ./apps/legacy-api
    dockerfilePath: ./apps/legacy-api/Dockerfile
    plan: free # Change to 'starter' or higher for production use
    region: ohio # Change to your preferred region
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: workorderpro-db
          property: connectionString
      - key: BACKEND_CORS_ORIGINS
        value: '["https://workorderpro.vercel.app", "http://localhost:3000"]' # Update with your Vercel URL
      - key: PROJECT_NAME
        value: "Work Order Pro"

  # New Golden Stack Backend
  - type: web
    name: workorderpro-api-v2
    env: docker
    dockerContext: ./apps/api
    dockerfilePath: ./apps/api/Dockerfile
    plan: free
    region: ohio
    envVars:
      - key: BACKEND_CORS_ORIGINS
        value: '["https://workorderpro.vercel.app", "http://localhost:3000"]'

databases:
  - name: workorderpro-db
    plan: free # Change to 'starter' or higher for production use
    region: ohio
